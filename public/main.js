(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},a(e)}function u(e,t,r){return u=c()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&l(i,r.prototype),i},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(d,e);var r,a,u,f,p=(r=d,a=c(),function(){var e,t=s(r);if(a){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return o(this,e)});function d(){return n(this,d),p.apply(this,arguments)}return u=d,(f=[{key:"connectedCallback",value:function(){var e=this,r=document.createElement("form");Array.from(this.children).forEach((function(e){return r.append(e)})),this.append(r);var n=this.getAttribute("action")||"",i=this.getAttribute("method")||"";n&&r.setAttribute("action",n),i&&r.setAttribute("method",i),r.addEventListener("submit",(function(n){n.preventDefault(),n.stopPropagation();var i,o,a=!0;if(r.querySelectorAll("ada-input").forEach((function(e){"submit"==e.getAttribute("type")||e._isValid()||(a=!1)})),a){var u,c={},l=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=t(e))){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}(new FormData(e.querySelector("form")));try{for(l.s();!(u=l.n()).done;){var s=(i=u.value,o=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}}(i,o)||t(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],p=s[1];null!=f&&null!=p&&(void 0!==c[f]?(Array.isArray(c[f])||(c[f]=[c[f]]),c[f].push(p)):c[f]=p)}}catch(e){l.e(e)}finally{l.f()}e.dispatchEvent(new CustomEvent("submit",{detail:c}))}else(e.querySelector("ada-input.error input")||e.querySelector("ada-input.error textarea")||e.querySelector("ada-input.error select")).focus()}))}}])&&i(u.prototype,f),Object.defineProperty(u,"prototype",{writable:!1}),d}(a(HTMLElement));function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){var t="function"==typeof Map?new Map:void 0;return y=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return b(e,arguments,g(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)},y(e)}function b(e,t,r){return b=v()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&m(i,r.prototype),i},b.apply(null,arguments)}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(u,e);var t,r,n,i,o,a=(t=u,r=v(),function(){var e,n=g(t);if(r){var i=g(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return h(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=a.call(this)).loaded=!1,e}return n=u,i=[{key:"attributeChangedCallback",value:function(e,t,r){if("value"==e){var n=this.querySelector("textarea")||this.querySelector("select")||this.querySelector("input");n&&(n.value=r)}}},{key:"connectedCallback",value:function(){var e=this;if(this.loaded)return!1;switch(this.loaded=!0,this.id||(this.id="_".concat(Math.random().toString(36).substr(2,9))),this.getAttribute("type")){case"checkbox":case"radio":this._createCheckboxInputs();break;case"textarea":this._createTextarea();break;case"select":this._createSelect();break;default:this._createDefaultInput()}requestAnimationFrame((function(){e.querySelectorAll("input, textarea, select").forEach((function(t){t.addEventListener("input",(function(t){return e._isValid()})),t.addEventListener("input",(function(t){return e.dispatchEvent(new CustomEvent("interact",{detail:t.target.value}))}))}))}))}},{key:"_createTextarea",value:function(){var e=document.createElement("label");e.innerText=this.getAttribute("label"),e.setAttribute("for","".concat(this.id,"-input")),this.append(e);var t=document.createElement("textarea");t.placeholder=this.getAttribute("placeholder")||"",t.value=this.getAttribute("value"),t.name=this.getAttribute("name"),t.id="".concat(this.id,"-input"),this.append(t);var r=this.getAttribute("rules");r&&-1!=r.indexOf("required")&&(t.setAttribute("aria-required",!0),e.innerHTML=e.innerText+'<span aria-hidden="true">*</span>')}},{key:"_createCheckboxInputs",value:function(){var e=document.createElement("fieldset");Array.from(this.children).forEach((function(t){return e.append(t)})),this.append(e);var t=document.createElement("legend");t.innerHTML=this.getAttribute("label"),e.prepend(t);var r=this.getAttribute("rules");r&&-1!=r.indexOf("required")&&(e.setAttribute("aria-required",!0),t.innerHTML=t.innerText+'<span aria-hidden="true">*</span>')}},{key:"_createDefaultInput",value:function(){var e=document.createElement("label");e.innerText=this.getAttribute("label"),e.setAttribute("for","".concat(this.id,"-input")),this.append(e);var t=document.createElement("input");t.type=this.getAttribute("type"),t.name=this.getAttribute("name"),t.placeholder=this.getAttribute("placeholder")||"",t.value=this.getAttribute("value"),t.id="".concat(this.id,"-input"),this.append(t),"hidden"==t.type&&(e.style.clip="rect(0 0 0 0)",e.style.clipPath="inset(50%)",e.style.height="1px",e.style.overflow="hidden",e.style.position="absolute",e.style.whiteSpace="nowrap",e.style.width="1px");var r=this.getAttribute("rules");r&&-1!=r.indexOf("required")&&(t.setAttribute("aria-required",!0),e.innerHTML=e.innerText+'<span aria-hidden="true">*</span>')}},{key:"_createSelect",value:function(){var e=this,t=document.createElement("label");t.innerText=this.getAttribute("label"),t.setAttribute("for","".concat(this.id,"-input")),this.append(t);var r=document.createElement("select");r.name=this.getAttribute("name"),r.id="".concat(this.id,"-input"),this.append(r),setTimeout((function(){return r.value=e.getAttribute("value")}));var n=this.getAttribute("rules");n&&-1!=n.indexOf("required")&&(r.setAttribute("aria-required",!0),t.innerHTML=t.innerText+'<span aria-hidden="true">*</span>')}},{key:"_isValid",value:function(){var e=this,t=this.getAttribute("rules"),r=!0,n=[];return"submit"!=this.getAttribute("type")&&(t&&t.split("|").forEach((function(t){var i=(e.querySelector("textarea")||e.querySelector("select")||e.querySelector("input")).value,o=t.split(":"),a=o[0],u=o[1];switch(a){case"required":e._validateRequired(i)||(n.push("This field is required"),r=!1);break;case"email":e._validateEmail(i)||(n.push("This field must be a valid email"),r=!1);break;case"min":e._validateMin(i,u)||(n.push("This field must be greater or equal to "+u),r=!1);break;case"max":e._validateMax(i,u)||(n.push("This field must be less than or equal to "+u),r=!1);break;case"maxLength":e._validateMaxLength(i,u)||(n.push("This field must be less than or equal to "+u+" characters"),r=!1);break;case"minLength":e._validateMinLength(i,u)||(n.push("This field must be greater than or equal to "+u+" characters"),r=!1);break;case"sameAs":if(!e._validateSameAs(i,u)){var c=e.closest("ada-form").querySelector('input[name="'.concat(u,'"]')).parentNode.querySelector("label").innerText.replace("*","").toLowerCase();n.push("This field must match the ".concat(c," input")),r=!1}break;case"mime":e._validateMime(i,u)||(n.push("This field must match the file type: "+u),r=!1);break;case"dateBefore":e._validateDateBefore(i,u)||(n.push("This field must be before "+u),r=!1);break;case"dateAfter":e._validateDateAfter(i,u)||(n.push("This field must be after "+u),r=!1);break;case"regex":e._validateRegex(i,u)||(n.push("This field is invalid"),r=!1)}})),this._setErrors(n),r)}},{key:"_validateRequired",value:function(e){var t=this,r=this.getAttribute("type");if("checkbox"==r||"radio"==r){var n=!1;return this.querySelectorAll('[name="'.concat(this.getAttribute("name"),'"]')).forEach((function(e){(e.checked||t.selected)&&(n=!0)})),n}return null!=e&&e.length}},{key:"_validateEmail",value:function(e){return!e||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)}},{key:"_validateDateBefore",value:function(e,t){var r=new Date(t),n=new Date(e+" 00:00:00");return!e||r>n}},{key:"_validateDateAfter",value:function(e,t){var r=new Date(t),n=new Date(e+" 00:00:00");return!e||r<n}},{key:"_validateRegex",value:function(e,t){var r=new RegExp(t);return!e||r.test(e)}},{key:"_validateMime",value:function(e,t){var r=this.querySelector("input").files[0],n=!0;return r&&(n=-1!=t.indexOf("*")?-1!==r.type.indexOf(t.replaceAll("*","")):r.type!=t),n}},{key:"_validateSameAs",value:function(e,t){var r=this.closest("ada-form").querySelector('input[name="'.concat(t,'"]')).value;return!e||e==r}},{key:"_validateMinLength",value:function(e,t){return!e||e.length>=t}},{key:"_validateMaxLength",value:function(e,t){return!e||e.length<=t}},{key:"_validateMin",value:function(e,t){if("checkbox"==this.getAttribute("type")){var r=this.querySelectorAll("input:checked");return!r.length||parseFloat(t)<=r.length}return!e||parseFloat(t)<=parseFloat(e)}},{key:"_validateMax",value:function(e,t){if("checkbox"==this.getAttribute("type")){var r=this.querySelectorAll("input:checked");return!r.length||parseFloat(t)>=r.length}return!e||parseFloat(t)>=parseFloat(e)}},{key:"_setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.querySelectorAll(".ada-input-error")||[];if(r.forEach((function(e){return e.remove()})),e.length?(this.classList.add("error"),this.classList.remove("valid")):(this.classList.remove("error"),this.classList.add("valid")),e.length){var n=document.createElement("ul");n.id="".concat(this.id,"-errors"),n.classList.add("ada-input-error"),e.forEach((function(e){var t=document.createElement("li");t.innerText=e,n.append(t)}));var i=this.querySelector("textarea")||this.querySelector("input")||this.querySelector("select");i.setAttribute("aria-describedby","".concat(this.id,"-errors")),this.append(n),t&&i.focus()}else{var o=this.querySelector("textarea")||this.querySelector("input")||this.querySelector("select");o.removeAttribute("aria-describedby");var a=this.querySelector("#".concat(this.id,"-errors"));a&&a.remove()}}},{key:"setError",value:function(e){this._setErrors([e],!0)}}],o=[{key:"observedAttributes",get:function(){return["value"]}}],i&&d(n.prototype,i),o&&d(n,o),Object.defineProperty(n,"prototype",{writable:!1}),u}(y(HTMLElement));function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){var t="function"==typeof Map?new Map:void 0;return k=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return E(e,arguments,q(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),O(n,e)},k(e)}function E(e,t,r){return E=x()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&O(i,r.prototype),i},E.apply(null,arguments)}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function T(){return"_".concat(Math.random().toString(36).substr(2,9))}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,r,n,i,o,a=(t=u,r=x(),function(){var e,n=q(t);if(r){var i=q(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return _(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=a.call(this)).loaded=!1,e}return n=u,o=[{key:"observedAttributes",get:function(){return["checked"]}}],(i=[{key:"attributeChangedCallback",value:function(e,t,r){if("checked"==e){var n=this.querySelector("input");n&&("true"==r?n.setAttribute("checked",!0):n.removeAttribute("checked"))}}},{key:"connectedCallback",value:function(){var e=this;if(this.loaded)return!1;if(this.loaded=!0,"select"==this.parentNode.getAttribute("type")){T();var t=this.parentNode.querySelector("select"),r=document.createElement("option");r.value=this.getAttribute("value"),r.textContent=this.getAttribute("label"),t.append(r),this.remove()}else{var n=T(),i=document.createElement("input");i.id=n,i.type=this.parentNode.parentNode.getAttribute("type"),i.name=this.parentNode.parentNode.getAttribute("name"),i.value=this.getAttribute("value"),this.append(i),"true"==this.getAttribute("checked")&&i.setAttribute("checked",!0);var o=document.createElement("label");o.innerHTML=this.getAttribute("label"),o.setAttribute("for",n),this.append(o),i.addEventListener("change",(function(t){e.dispatchEvent(new CustomEvent("interact",{detail:i.checked}))}))}}}])&&S(n.prototype,i),o&&S(n,o),Object.defineProperty(n,"prototype",{writable:!1}),u}(k(HTMLElement));customElements.define("ada-form",f),customElements.define("ada-input",A),customElements.define("ada-option",j)})();